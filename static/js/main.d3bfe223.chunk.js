(this["webpackJsonpaction-stack"]=this["webpackJsonpaction-stack"]||[]).push([[0],{111:function(e,t,n){},112:function(e,t,n){},261:function(e,t,n){},264:function(e,t,n){},265:function(e,t,n){},266:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(2),c=n.n(a),i=n(23),o=n.n(i),s=(n(111),n(1)),u=n(13),b=n(267),l=(n(112),n(24)),j=n(45),O=n(19),d=n(30),f=n(103),h=n(67),v=n.n(h);function x(e){var t=Object(a.useState)(g.createInitialHistory(e)),n=Object(u.a)(t,2),r=n[0],c=n[1];return{state:g.getCurrentState(r),onAction:function(e){return c(g.onAction(e))},onUndo:function(e){return c(g.onUndo(e))},onRedo:function(e){return c(g.onRedo(e))},numberOfAvailableUndos:g.getNumberOfAvailableUndos(r),numberOfAvailableRedos:g.getNumberOfAvailableRedos(r)}}var m=Object(a.createContext)(null);function y(e){var t=e.initialState,n=e.children,a=x(t);return Object(r.jsx)(m.Provider,{value:a,children:n})}var p=Object(d.a)("assertKeysInNewState"),k=Object(d.a)("undoOneStep"),I=Object(d.a)("redoOneStep"),S=Object(d.a)("getDifferences"),g=function e(){Object(j.a)(this,e)};g.createInitialHistory=function(e){return{array:[e],historyIndex:0}},g.getCurrentState=function(e){return e.array[e.historyIndex]},g.getNumberOfAvailableUndos=function(e){return e.historyIndex},g.getNumberOfAvailableRedos=function(e){return Math.max(e.array.length-1-e.historyIndex,0)},g.onAction=function(e){return function(t){var n=g.getCurrentState(t);Object(O.a)(g,p)[p](e,n);var r=Object(O.a)(g,S)[S](n,e);if(Object.keys(r).length>0){var a=t.array.slice(0,t.historyIndex);return{array:[].concat(Object(l.a)(a),[r,e]),historyIndex:t.historyIndex+1}}return t}},Object.defineProperty(g,p,{writable:!0,value:function(e,t){var n=Object.keys(e),r=Object.keys(t);if(v.a.difference(n,r).length||v.a.difference(r,n).length)throw new Error("ActionStack.onAction received a new state that has different keys than the previous one.")}}),g.onUndo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(t){if(e<=t.historyIndex){for(var n=Object(s.a)({},t),r=0;r<e;r++)n=Object(O.a)(g,k)[k](n);return n}return t}},Object.defineProperty(g,k,{writable:!0,value:function(e){var t=g.getCurrentState(e),n=Object(s.a)(Object(s.a)({},t),e.array[e.historyIndex-1]),r=Object(O.a)(g,S)[S](t,n),a=e.array.slice(0,e.historyIndex-1),c=e.array.slice(e.historyIndex+1);return{array:[].concat(Object(l.a)(a),[n,r],Object(l.a)(c)),historyIndex:e.historyIndex-1}}}),g.onRedo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(t){if(e<=t.array.length-1-t.historyIndex){for(var n=Object(s.a)({},t),r=0;r<e;r++)n=Object(O.a)(g,I)[I](n);return n}return t}},Object.defineProperty(g,I,{writable:!0,value:function(e){var t=g.getCurrentState(e),n=Object(s.a)(Object(s.a)({},t),e.array[e.historyIndex+1]),r=Object(O.a)(g,S)[S](t,n),a=e.array.slice(0,e.historyIndex),c=e.array.slice(e.historyIndex+2);return{array:[].concat(Object(l.a)(a),[r,n],Object(l.a)(c)),historyIndex:e.historyIndex+1}}}),Object.defineProperty(g,S,{writable:!0,value:function(e,t){var n={};for(var r in t)Object.hasOwnProperty.call(t,r)&&t[r]!==e[r]&&(n[r]=e[r]);return n}});var N=n(43),A=n(99),C=n.n(A);n(261);var w=function(e){var t=e.onClick,n=e.numberOfAvailableOperations,c=e.children,i=Object(a.useState)(!1),o=Object(u.a)(i,2),s=o[0],l=o[1],j=Math.max(0,n-1),O=new Array(j).fill(0).map((function(e,n){return Object(r.jsxs)("button",{type:"button",onClick:function(){l(!1),t(n+2)},children:[n+2," steps"]},n+2)}));return Object(r.jsxs)("div",{className:"action-button",onMouseLeave:function(){return l(!1)},children:[Object(r.jsx)("button",{type:"button",onClick:function(){return t()},onMouseEnter:function(){return l(!0)},disabled:0===n,children:c}),Object(r.jsx)(b.a,{in:n>1&&s,classNames:"fade-in",mountOnEnter:!0,unmountOnExit:!0,timeout:300,children:Object(r.jsx)("div",{className:"additional-buttons",onMouseEnter:function(){return l(!0)},children:O})})]})};n(264);var E=function(e){var t,n,a=e.formId,c=e.name,i=e.value,o=e.referenceValue,u=e.onChange;switch(typeof i){case"boolean":t={type:"checkbox",checked:i},n=function(e){return e.target.checked};break;case"string":t={type:"text",value:i},n=function(e){return e.target.value};break;case"number":t={type:"number",value:i},n=function(e){var t=parseInt(e.target.value);return isNaN(t)?0:t};break;default:throw new TypeError("Input component: unsupported type: ".concat(typeof i))}return Object(r.jsxs)("div",{className:"input-field "+(i!==o?"diff-highlight":""),children:[Object(r.jsxs)("label",{htmlFor:a+c,children:[c,":"]}),Object(r.jsx)("input",Object(s.a)(Object(s.a)({},t),{},{id:a+c,onChange:function(e){return u(n(e))}}))]})};n(265);var R=function(e){var t=e.state,n=e.onAction,c=e.onUndo,i=e.onRedo,o=e.numberOfAvailableUndos,b=e.numberOfAvailableRedos,l=e.formId,j=void 0===l?"":l,O=Object(a.useState)(null),d=Object(u.a)(O,2),f=d[0],h=d[1];return Object(a.useEffect)((function(){h(t)}),[t]),Object(r.jsxs)("form",{className:"undoable-form",children:[f&&Object.keys(f).map((function(e){return Object(r.jsx)(E,{formId:j,name:e,value:f[e],onChange:function(t){return h((function(n){return Object(s.a)(Object(s.a)({},n),{},Object(N.a)({},e,t))}))},referenceValue:t[e]},e)})),Object(r.jsxs)("div",{className:"button-container",children:[Object(r.jsx)(w,{numberOfAvailableOperations:o,onClick:c,children:"Undo"}),Object(r.jsx)(w,{numberOfAvailableOperations:b,onClick:i,children:"Redo"}),Object(r.jsx)("button",{type:"button",onClick:function(){return n(f)},disabled:C.a.isEqual(f,t),children:"Save"})]})]})};var U,P=function(e){var t=e.initialState,n=e.className,a=x(t);return Object(r.jsxs)("div",{className:n,children:[Object(r.jsx)("h2",{children:"useActionStack hook example"}),Object(r.jsx)(R,Object(s.a)({formId:"hook"},a))]})},M=n(100),H=n(102),q=n(101),J=function(e){Object(H.a)(n,e);var t=Object(q.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(M.a)(n,[{key:"render",value:function(){return Object(r.jsxs)("div",{className:this.props.className,children:[Object(r.jsx)("h2",{children:"ActionStack HOC example"}),Object(r.jsx)(R,Object(s.a)({formId:"hoc"},this.props))]})}}]),n}(c.a.Component),T=(U=J,function(e){var t=e.initialState,n=Object(f.a)(e,["initialState"]),a=x(t);return Object(r.jsx)(U,Object(s.a)(Object(s.a)({},n),a))});var V=function(e){var t=Object(a.useContext)(m);return Object(r.jsx)(R,Object(s.a)(Object(s.a)({},e),t))};var B=function(e){var t=e.initialState,n=e.className;return Object(r.jsxs)("div",{className:n,children:[Object(r.jsx)("h2",{children:"ActionStack Provider example"}),Object(r.jsxs)(y,{initialState:t,children:[Object(r.jsx)(m.Consumer,{children:function(e){return Object(r.jsx)(R,Object(s.a)(Object(s.a)({},e),{},{formId:"provider-1"}))}}),Object(r.jsx)("h3",{children:"Same context:"}),Object(r.jsx)(V,{formId:"provider-2"})]})]})},D={dev:!0,qa:!0,prod:!1,text:"This is a text.",number:13};var F=function(){var e=Object(a.useState)("hook"),t=Object(u.a)(e,2),n=t[0],c=t[1],i={timeout:550,classNames:"fade-in",mountOnEnter:!0};return Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)("h1",{children:"ActionStack"}),Object(r.jsxs)("form",{className:"example-selector",children:[Object(r.jsx)("button",{type:"button",onClick:function(){return c("hook")},children:"Hook"}),Object(r.jsx)("button",{type:"button",onClick:function(){return c("hoc")},children:"HOC"}),Object(r.jsx)("button",{type:"button",onClick:function(){return c("provider")},children:"Provider"})]}),Object(r.jsxs)("div",{className:"sample-container",children:[Object(r.jsx)(b.a,Object(s.a)(Object(s.a)({in:"hook"===n},i),{},{children:Object(r.jsx)(P,{className:"sample",initialState:D})})),Object(r.jsx)(b.a,Object(s.a)(Object(s.a)({in:"hoc"===n},i),{},{children:Object(r.jsx)(T,{className:"sample",initialState:D})})),Object(r.jsx)(b.a,Object(s.a)(Object(s.a)({in:"provider"===n},i),{},{children:Object(r.jsx)(B,{className:"sample",initialState:D})}))]})]})};o.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(F,{})}),document.getElementById("root"))}},[[266,1,2]]]);
//# sourceMappingURL=main.d3bfe223.chunk.js.map